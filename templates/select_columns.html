{% extends "base.html" %}
{% block title %}Seleccionar Columnas - GeoExcel Map{% endblock %}
{% block content %}
<div class="row justify-content-center">
  <div class="col-lg-10">
    <div class="card">
      <div class="card-body">
        <h3 class="card-title text-center mb-3">Ayúdanos a Identificar tus Coordenadas</h3>
        <p class="card-text text-center text-muted mb-4">No pudimos detectar automáticamente las columnas de latitud y longitud. Por favor, selecciónalas de la siguiente lista.</p>
        
        <div class="card bg-dark-subtle border-secondary mb-4">
            <div class="card-header">
                <strong>Vista Previa de tus Datos</strong>
            </div>
            <div class="card-body">
                <div class="table-responsive" style="max-height: 250px;">
                    <!-- La clase 'table-nowrap' evita que el texto largo se divida en varias líneas -->
                    <style>.table-nowrap th, .table-nowrap td { white-space: nowrap; }</style>
                    {{ df_preview|safe }}
                </div>
            </div>
        </div>

        <div class="card border-primary">
            <div class="card-header bg-primary text-white">
                <strong>Acción Requerida: Selecciona las Columnas</strong>
            </div>
            <div class="card-body">
                <form action="{{ url_for('generate_map_step2') }}" method="post" class="mt-2">
                  <div class="row">
                    <div class="col-md-6 mb-3">
                      <label for="lat_col" class="form-label"><strong>Columna de Latitud (Y)</strong></label>
                      <select name="lat_col" id="lat_col" class="form-select form-select-lg" required>
                        <option value="" disabled selected>-- Elige una columna --</option>
                        {% for col in options %}
                        <option value="{{ col }}">{{ col }}</option>
                        {% endfor %}
                      </select>
                    </div>
                    <div class="col-md-6 mb-3">
                      <label for="lon_col" class="form-label"><strong>Columna de Longitud (X)</strong></label>
                      <select name="lon_col" id="lon_col" class="form-select form-select-lg" required>
                        <option value="" disabled selected>-- Elige una columna --</option>
                        {% for col in options %}
                        <option value="{{ col }}">{{ col }}</option>
                        {% endfor %}
                      </select>
                    </div>
                  </div>
                  <button type="submit" class="btn btn-primary btn-lg w-100 mt-3">Confirmar y Continuar</button>
                </form>
            </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}